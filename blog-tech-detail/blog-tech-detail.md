---
title: 博客的技术细节和思考
date: 2017/09/11 19:00:00
draft: true
categories:
  - 技术
  - Web
tags:
  - 前端
  - Hexo
  - NexT
  - 博客
  - 魔改
---

做个博客也是不断踩坑啊…从技术选型到部署，很多都是我从没接触过的东西。所以打算专门写一篇博文来说说做这个博客的时候的一些思考、遇到的坑和解决方案。

其实希望每个做 Web 开发的同学都能有自己的一个从零写起的博客（虽然我这个是以别人写好的为基础的🙄），在这个博客上**用上各种各样的实验性技术，不断折腾更新**！毕竟只有自己的博客才是真的想怎么搞就可以怎么搞的地方。

<!-- more -->

# 动手之前的计划

在构想这个博客的时候，我设定了几个目标：

1. 博客内容全部托管在 github 上，并且有一个单独的分支专门用来存放文章（没有或者很少代码在这个分支里面）
2. 文章可以在编辑时直接阅读（不用借助 dev-server 就可以看到文章完整效果）
3. 文章中尽量少出现必须要写代码才能完成的效果
4. push 后自动部署文章到服务器上
5. 能够方便地在不同的地方（不同的设备上）编辑文章

当然方便是最重要的！毕竟懒 🙄

# 选择基础框架

最开始当然打算自己从零写一个！但是= = 自己实在是太懒了…我 github 上的 blog 仓库建了又删，删了又建，再这样下去怕是要死循环了…再加上现在要去实习，所以打算用框架搞一波！

现有的博客框架实在是太多太多了…简直是眼花缭乱！为了满足第一个要求，我需要一个没有 CMS 的博客系统。简单 Google 了之后发现了 [Hexo](https://hexo.io) 框架，这个框架主要有下面几点吸引我的地方：

1. 文章使用文件存储。只要更新文件内容就可以更新页面（简单）
2. 文章使用 Markdown 格式（很少代码）
3. 纯前端，把生成的页面丢给 Nginx 就可以了

当然！这玩意儿的坑也是不少的…现在是时候踩坑了

# Hexo 踩坑记

## NexT 主题

hexo 的主题还是蛮多的。当然，作为一个懂一点点设计（啊呸）的人当然想自己搞一套！后来还是决定在 NexT 主题的基础上进行少量的修改后使用。其中最大的修改就是顶栏的背景图片和博客名称了。感觉魔改完一波还是不错的233333

## 文件结构

hexo 默认的文件结构是没办法做到直接在 vscode 直接编辑预览 markdown 的，因为默认情况下，如果源文件结构是这样的：

```
_posts/
  hello-world.md
  hello-world/
    image.jpg
```

最后生成的文件的结构是：

```
article/
  hello-world/
    image.jpg
    index.html
```

问题就在于 hexo 把 markdown 文件*往里移了一层*，但文件内部的 url 不变，所以默认情况下是不可能做到直接预览的…但不能直接预览要怎么愉快地写作？？于是我想到了第一个魔改：

**编译前把 markdown 移出来一层**

😏 具体是在 `_posts` 里，找到目录 A 下与目录同名的 A.md文件，把 A.md 移到 A 目录的上面一层就可以了。有兴趣可以[点这里](https://github.com/hjkcai/blog/blob/hexo/scripts/resolve-url.js#L33)看具体代码。

## CDN 储存

为了保证博客的加载速度，所有静态资源都是使用 CDN 进行加速的
